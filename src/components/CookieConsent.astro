---

---

<section
  id="cc-banner"
  class="cc-banner"
  hidden
>
  <div class="cc-inner">
    <div>
      <div class="cc-title">We use cookies</div>
      <p class="cc-text">
        I use simple Google analytics to learn what content interests visitors
        most and make this portfolio even better. You are free to decline, no
        pressure :)
      </p>
    </div>
    <div class="cc-actions">
      <button
        id="cc-decline"
        class="btn btn-outline"
        type="button"
        >Decline</button
      >
      <button
        id="cc-accept"
        class="btn btn-primary"
        type="button"
        >Accept</button
      >
    </div>
  </div>
</section>

<script>
  // Reuse the gtag shim set in <head>; ensure it exists
  window.dataLayer = window.dataLayer || [];
  window.gtag =
    window.gtag ||
    function () {
      dataLayer.push(arguments);
    };

  function updateConsent(consent) {
    gtag("consent", "update", consent);
  }

  const KEY = "cookiesConsent";
  const storedConsent = localStorage.getItem(KEY);

  if (storedConsent === "true") {
    updateConsent({
      analytics_storage: "granted",
      ad_storage: "granted",
      ad_user_data: "granted",
      ad_personalization: "granted",
    });
  } else if (storedConsent === "false") {
    updateConsent({
      analytics_storage: "denied",
      ad_storage: "denied",
      ad_user_data: "denied",
      ad_personalization: "denied",
    });
  } else {
    // show banner
    const banner = document.getElementById("cc-banner");
    if (banner) banner.hidden = false;
  }

  const btnAccept = document.getElementById("cc-accept");
  const btnDecline = document.getElementById("cc-decline");

  if (btnAccept)
    btnAccept.addEventListener("click", () => {
      localStorage.setItem(KEY, "true");
      const banner = document.getElementById("cc-banner");
      if (banner) banner.hidden = true;
      updateConsent({
        analytics_storage: "granted",
        ad_storage: "granted",
        ad_user_data: "granted",
        ad_personalization: "granted",
      });
    });

  if (btnDecline)
    btnDecline.addEventListener("click", () => {
      localStorage.setItem(KEY, "false");
      const banner = document.getElementById("cc-banner");
      if (banner) banner.hidden = true;
      updateConsent({
        analytics_storage: "denied",
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
      });
    });
</script>

<style>
  /* minimal styling, reusing your design tokens */
  .cc-banner {
    position: fixed;
    inset-inline: 1rem;
    bottom: 1rem;
    z-index: 9999;
    max-width: 56rem;
    margin-inline: auto;
    background: var(--gray-900);
    color: var(--gray-200);
    border: 1px solid var(--gray-600);
    border-radius: 1rem;
    box-shadow: var(--shadow-lg);
  }
  .cc-inner {
    padding: 1rem 1.25rem;
    display: grid;
    gap: 0.75rem;
  }
  @media (min-width: 50em) {
    .cc-inner {
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 1rem;
    }
  }
  .cc-title {
    font-family: var(--font-brand);
    color: var(--gray-100);
    font-size: var(--text-lg);
    margin-bottom: 0.25rem;
  }
  .cc-text {
    font-size: var(--text-sm);
    opacity: 0.95;
  }
  .cc-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
  }
  .btn {
    border: 1px solid transparent;
    border-radius: 0.75rem;
    padding: 0.6rem 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform var(--theme-transition);
    font-family: var(--font-body);
    box-shadow: var(--shadow-sm);
  }
  .btn:hover {
    transform: translateY(-1px);
  }
  .btn-outline {
    background: transparent;
    border-color: var(--gray-600);
    color: var(--gray-100);
  }
  .btn-primary {
    background: var(--gradient-accent);
    color: var(--accent-text-over);
    border-color: var(--gray-600);
  }
</style>
